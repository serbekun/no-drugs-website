<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>薬物依存症と予防 - 教育リソース</title>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700&family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    /* === CSS Variables === */
    :root {
      /* Colors */
      --clr-primary: #3f51b5;
      --clr-primary-light: #6573c3;
      --clr-primary-dark: #303f9f;
      --clr-secondary: #f50057;
      --clr-bg: #f4f7fa;
      --clr-card: #ffffff;
      --clr-text: #333333;
      --clr-light: #eef1f6;
      --clr-success: #4caf50;
      --clr-error: #f44336;
      --clr-warning: #ff9800;
      --clr-info: #2196f3;
      
      /* Spacing */
      --spacing-xs: 0.25rem;
      --spacing-sm: 0.5rem;
      --spacing-md: 1rem;
      --spacing-lg: 1.5rem;
      --spacing-xl: 2rem;
      
      /* Typography */
      --text-sm: 0.875rem;
      --text-base: 1rem;
      --text-md: 1.25rem;
      --text-lg: 1.5rem;
      --text-xl: 1.8rem;
      --text-xxl: 2.2rem;
      
      /* Borders & Shadows */
      --radius-sm: 4px;
      --radius-md: 8px;
      --radius-lg: 12px;
      --shadow-sm: 0 2px 4px rgba(0,0,0,0.1);
      --shadow-md: 0 4px 8px rgba(0,0,0,0.1);
      --shadow-lg: 0 6px 12px rgba(0,0,0,0.15);
      
      /* Transitions */
      --transition: all 0.3s ease;
    }
    
    /* === Base Styles === */
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    
    body {
      font-family: 'Noto Sans JP', 'Roboto', sans-serif;
      background-color: var(--clr-bg);
      color: var(--clr-text);
      line-height: 1.6;
      display: flex;
      flex-direction: column;
      min-height: 100vh;
    }
    
    /* === Typography === */
    h1, h2, h3, h4 {
      font-weight: 700;
      line-height: 1.2;
      margin-bottom: var(--spacing-md);
    }
    
    h1 {
      font-size: var(--text-xxl);
    }
    
    h2 {
      font-size: var(--text-xl);
      color: var(--clr-primary);
    }
    
    h3 {
      font-size: var(--text-lg);
      color: var(--clr-primary-dark);
    }
    
    p {
      margin-bottom: var(--spacing-md);
    }
    
    a {
      color: var(--clr-primary);
      text-decoration: none;
      transition: var(--transition);
    }
    
    a:hover {
      color: var(--clr-primary-dark);
      text-decoration: underline;
    }
    
    /* === Layout === */
    .container {
      width: 100%;
      max-width: 900px;
      margin: 0 auto;
      padding: 0 var(--spacing-md);
    }
    
    header {
      background: linear-gradient(135deg, var(--clr-primary), var(--clr-primary-dark));
      color: white;
      padding: var(--spacing-xl) 0;
      text-align: center;
      box-shadow: var(--shadow-md);
      position: relative;
    }
    
    .header-content {
      max-width: 800px;
      margin: 0 auto;
    }
    
    .header-subtitle {
      font-weight: 300;
      font-size: var(--text-md);
      opacity: 0.9;
      margin-top: var(--spacing-sm);
    }
    
    main {
      flex: 1;
      padding: var(--spacing-xl) 0;
    }
    
    .cards-container {
      display: flex;
      flex-direction: column;
      gap: var(--spacing-xl);
    }
    
    footer {
      background-color: var(--clr-light);
      text-align: center;
      padding: var(--spacing-lg) 0;
      margin-top: auto;
      font-size: var(--text-sm);
      box-shadow: 0 -2px 6px rgba(0,0,0,0.05);
    }
    
    /* === Card Styles === */
    .card {
      background-color: var(--clr-card);
      border-radius: var(--radius-md);
      box-shadow: var(--shadow-sm);
      padding: var(--spacing-xl);
      transition: var(--transition);
      position: relative;
      overflow: hidden;
    }
    
    .card:hover {
      box-shadow: var(--shadow-lg);
      transform: translateY(-5px);
    }
    
    .card::before {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      width: 4px;
      height: 100%;
      background-color: var(--clr-primary);
    }
    
    .card-title {
      display: flex;
      align-items: center;
      gap: var(--spacing-sm);
    }
    
    .card-title i {
      color: var(--clr-primary);
    }
    
    .card-img {
      max-width: 100%;
      height: auto;
      border-radius: var(--radius-sm);
      box-shadow: var(--shadow-sm);
      transition: var(--transition);
      margin: var(--spacing-md) 0;
      display: block;
      margin-left: auto;
      margin-right: auto;
    }
    
    .card-img:hover {
      transform: scale(1.02);
      box-shadow: var(--shadow-md);
    }
    
    .img-caption {
      text-align: center;
      font-size: var(--text-sm);
      color: #666;
      margin-top: var(--spacing-xs);
      font-style: italic;
    }
    
    /* === Quiz Styles === */
    .quiz-card {
      background-color: rgba(63, 81, 181, 0.05);
    }
    
    .quiz-options {
      display: flex;
      flex-direction: column;
      gap: var(--spacing-sm);
      margin-bottom: var(--spacing-md);
    }
    
    .quiz-option {
      display: flex;
      align-items: center;
      padding: var(--spacing-sm) var(--spacing-md);
      background-color: white;
      border-radius: var(--radius-sm);
      cursor: pointer;
      transition: var(--transition);
      border: 2px solid #e0e0e0;
    }
    
    .quiz-option:hover {
      background-color: rgba(63, 81, 181, 0.05);
      border-color: var(--clr-primary-light);
    }
    
    .quiz-option input {
      margin-right: var(--spacing-sm);
      cursor: pointer;
    }
    
    .btn {
      display: inline-block;
      background-color: var(--clr-primary);
      color: white;
      border: none;
      padding: 0.75rem 1.5rem;
      border-radius: var(--radius-sm);
      font-weight: 500;
      font-size: var(--text-base);
      cursor: pointer;
      transition: var(--transition);
      text-align: center;
      box-shadow: var(--shadow-sm);
    }
    
    .btn:hover {
      background-color: var(--clr-primary-dark);
      box-shadow: var(--shadow-md);
      transform: translateY(-2px);
    }
    
    .btn:active {
      transform: translateY(0);
    }
    
    .btn-block {
      display: block;
      width: 100%;
    }
    
    .btn-secondary {
      background-color: var(--clr-secondary);
    }
    
    .btn-secondary:hover {
      background-color: #d5004f;
    }
    
    .btn-outline {
      background-color: transparent;
      border: 2px solid var(--clr-primary);
      color: var(--clr-primary);
    }
    
    .btn-outline:hover {
      background-color: rgba(63, 81, 181, 0.1);
    }
    
    .quiz-result {
      margin-top: var(--spacing-md);
      padding: var(--spacing-md);
      border-radius: var(--radius-sm);
      font-weight: 500;
      text-align: center;
      opacity: 0;
      transform: translateY(10px);
      transition: var(--transition);
    }
    
    .quiz-result.show {
      opacity: 1;
      transform: translateY(0);
    }
    
    .quiz-result.success {
      background-color: rgba(76, 175, 80, 0.1);
      color: var(--clr-success);
      border-left: 4px solid var(--clr-success);
    }
    
    .quiz-result.error {
      background-color: rgba(244, 67, 54, 0.1);
      color: var(--clr-error);
      border-left: 4px solid var(--clr-error);
    }
    
    .quiz-result.warning {
      background-color: rgba(255, 152, 0, 0.1);
      color: var(--clr-warning);
      border-left: 4px solid var(--clr-warning);
    }
    
    .quiz-result.info {
      background-color: rgba(33, 150, 243, 0.1);
      color: var(--clr-info);
      border-left: 4px solid var(--clr-info);
    }
    
    /* === Quiz Navigation === */
    .quiz-nav {
      display: flex;
      justify-content: space-between;
      margin-top: var(--spacing-md);
    }
    
    .quiz-counter {
      display: flex;
      justify-content: center;
      gap: var(--spacing-xs);
      margin: var(--spacing-md) 0;
    }
    
    .counter-dot {
      width: 12px;
      height: 12px;
      border-radius: 50%;
      background-color: #e0e0e0;
      transition: var(--transition);
    }
    
    .counter-dot.active {
      background-color: var(--clr-primary);
      transform: scale(1.2);
    }
    
    .counter-dot.answered {
      background-color: var(--clr-success);
    }
    
    /* === Results Section === */
    .results-summary {
      background-color: rgba(63, 81, 181, 0.05);
      border-radius: var(--radius-md);
      padding: var(--spacing-lg);
      margin: var(--spacing-lg) 0;
    }
    
    .result-item {
      padding: var(--spacing-md);
      margin-bottom: var(--spacing-sm);
      border-radius: var(--radius-sm);
      border-left: 4px solid #e0e0e0;
    }
    
    .result-item.correct {
      border-left-color: var(--clr-success);
      background-color: rgba(76, 175, 80, 0.05);
    }
    
    .result-item.incorrect {
      border-left-color: var(--clr-error);
      background-color: rgba(244, 67, 54, 0.05);
    }
    
    .result-item h4 {
      display: flex;
      align-items: center;
      gap: var(--spacing-sm);
    }
    
    .result-item .explanation {
      margin-top: var(--spacing-sm);
      padding: var(--spacing-sm);
      background-color: rgba(0,0,0,0.03);
      border-radius: var(--radius-sm);
    }
    
    .score-display {
      font-size: var(--text-xl);
      font-weight: bold;
      text-align: center;
      margin: var(--spacing-lg) 0;
    }
    
    .score-percentage {
      font-size: 3rem;
      color: var(--clr-primary);
      line-height: 1;
      margin-bottom: var(--spacing-sm);
    }
    
    /* === Links Card === */
    .links-card {
      background-color: rgba(101, 115, 195, 0.05);
    }
    
    .links-list {
      list-style: none;
      padding: 0;
    }
    
    .links-list li {
      padding: var(--spacing-sm) 0;
      border-bottom: 1px solid rgba(0,0,0,0.05);
      display: flex;
      align-items: center;
      gap: var(--spacing-sm);
    }
    
    .links-list li:last-child {
      border-bottom: none;
    }
    
    /* === Warning Box === */
    .warning-box {
      background-color: rgba(255, 152, 0, 0.1);
      border-left: 4px solid var(--clr-warning);
      padding: var(--spacing-md);
      border-radius: var(--radius-sm);
      margin: var(--spacing-md) 0;
    }
    
    .info-box {
      background-color: rgba(33, 150, 243, 0.1);
      border-left: 4px solid var(--clr-info);
      padding: var(--spacing-md);
      border-radius: var(--radius-sm);
      margin: var(--spacing-md) 0;
    }
    
    .success-box {
      background-color: rgba(76, 175, 80, 0.1);
      border-left: 4px solid var(--clr-success);
      padding: var(--spacing-md);
      border-radius: var(--radius-sm);
      margin: var(--spacing-md) 0;
    }
    
    /* === Animations === */
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    .animate-in {
      animation: fadeIn 0.5s ease forwards;
    }
    
    .card:nth-child(1) { animation-delay: 0.1s; }
    .card:nth-child(2) { animation-delay: 0.2s; }
    .card:nth-child(3) { animation-delay: 0.3s; }
    .card:nth-child(4) { animation-delay: 0.4s; }
    .card:nth-child(5) { animation-delay: 0.5s; }
    .card:nth-child(6) { animation-delay: 0.6s; }
    .card:nth-child(7) { animation-delay: 0.7s; }
    .card:nth-child(8) { animation-delay: 0.8s; }
    
    /* === Responsive Design === */
    @media (max-width: 768px) {
      :root {
        --text-xxl: 1.8rem;
        --text-xl: 1.5rem;
        --text-lg: 1.3rem;
        --spacing-xl: 1.5rem;
      }
      
      .card {
        padding: var(--spacing-lg);
      }
      
      .quiz-nav {
        flex-direction: column;
        gap: var(--spacing-sm);
      }
    }
    
    /* === Tag Styles === */
    .tags-container {
      display: flex;
      flex-wrap: wrap;
      gap: var(--spacing-sm);
      margin-top: var(--spacing-md);
    }
    
    .tag {
      background-color: var(--clr-primary-light);
      color: white;
      padding: var(--spacing-xs) var(--spacing-sm);
      border-radius: var(--radius-sm);
      font-size: var(--text-sm);
    }
    
    /* === Language Selector === */
    .language-selector {
      position: absolute;
      top: var(--spacing-md);
      right: var(--spacing-md);
      display: flex;
      gap: var(--spacing-xs);
      z-index: 100;
    }
    
    .lang-btn {
      background-color: rgba(255, 255, 255, 0.2);
      border: none;
      border-radius: var(--radius-sm);
      color: white;
      padding: var(--spacing-xs) var(--spacing-sm);
      cursor: pointer;
      transition: var(--transition);
      font-size: var(--text-sm);
      display: flex;
      align-items: center;
      gap: var(--spacing-xs);
    }
    
    .lang-btn:hover {
      background-color: rgba(255, 255, 255, 0.3);
    }
    
    .lang-btn.active {
      background-color: white;
      color: var(--clr-primary);
      font-weight: 500;
    }
    
    .lang-icon {
      font-size: 1rem;
    }
    
    .settings-panel {
      background-color: var(--clr-card);
      border-radius: var(--radius-md);
      box-shadow: var(--shadow-md);
      padding: var(--spacing-md);
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%) scale(0);
      z-index: 1000;
      width: 90%;
      max-width: 400px;
      transition: transform 0.3s ease;
    }
    
    .settings-panel.active {
      transform: translate(-50%, -50%) scale(1);
    }
    
    .settings-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.5);
      z-index: 999;
      opacity: 0;
      visibility: hidden;
      transition: all 0.3s ease;
    }
    
    .settings-overlay.active {
      opacity: 1;
      visibility: visible;
    }
    
    .settings-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: var(--spacing-md);
    }
    
    .settings-title {
      font-size: var(--text-lg);
      color: var(--clr-primary);
    }
    
    .close-settings {
      background: none;
      border: none;
      font-size: 1.5rem;
      cursor: pointer;
      color: var(--clr-text);
    }
    
    .theme-selector {
      margin-top: var(--spacing-lg);
    }
    
    .theme-options {
      display: flex;
      gap: var(--spacing-sm);
      margin-top: var(--spacing-sm);
    }
    
    .theme-btn {
      flex: 1;
      padding: var(--spacing-sm);
      border: 2px solid #e0e0e0;
      border-radius: var(--radius-sm);
      background: none;
      cursor: pointer;
      transition: var(--transition);
      text-align: center;
    }
    
    .theme-btn:hover {
      border-color: var(--clr-primary);
    }
    
    .theme-btn.active {
      border-color: var(--clr-primary);
      background-color: rgba(63, 81, 181, 0.1);
    }
    
    .theme-light {
      background: linear-gradient(to right, #f4f7fa 50%, #ffffff 50%);
    }
    
    .theme-dark {
      background: linear-gradient(to right, #1e1e2e 50%, #2d2d44 50%);
    }
    
    .theme-blue {
      background: linear-gradient(to right, #e3f2fd 50%, #bbdefb 50%);
    }
    
    .settings-btn {
      position: fixed;
      bottom: var(--spacing-md);
      right: var(--spacing-md);
      width: 50px;
      height: 50px;
      border-radius: 50%;
      background-color: var(--clr-primary);
      color: white;
      border: none;
      box-shadow: var(--shadow-md);
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.5rem;
      z-index: 100;
      transition: var(--transition);
    }
    
    .settings-btn:hover {
      transform: rotate(30deg);
      background-color: var(--clr-primary-dark);
    }
    
    /* Dark mode */
    body.dark-theme {
      --clr-bg: #1e1e2e;
      --clr-card: #2d2d44;
      --clr-text: #e0e0e0;
      --clr-light: #252536;
      background-color: var(--clr-bg);
      color: var(--clr-text);
    }
    
    /* Blue theme */
    body.blue-theme {
      --clr-primary: #1976d2;
      --clr-primary-light: #2196f3;
      --clr-primary-dark: #0d47a1;
      --clr-bg: #e3f2fd;
      --clr-card: #ffffff;
      --clr-text: #1a237e;
      --clr-light: #bbdefb;
    }
  </style>
</head>
<body>
  <header>
    <div class="language-selector">
      <button class="lang-btn" id="lang-ja">
        <i class="fas fa-language lang-icon"></i> 日本語
      </button>
      <button class="lang-btn" id="lang-en">
        <i class="fas fa-language lang-icon"></i> English
      </button>
    </div>
    
    <div class="header-content">
      <h1><i class="fas fa-ban"></i> <span id="main-title">薬物依存症と予防</span></h1>
      <p class="header-subtitle" id="main-subtitle">薬物の危険性、依存症からの回復、予防策について学ぶ</p>
    </div>
  </header>
  
  <main>
    <div class="container">
      <div class="cards-container">
        <!-- Card 1: What are drugs -->
        <div class="card animate-in">
          <div class="card-title">
            <i class="fas fa-pills"></i>
            <h2 id="card1-title">薬物とは？</h2>
          </div>
          <p id="card1-text1">
            薬物とは、脳や身体に作用して一時的に感覚や意識を変化させる化学物質です。
            処方薬、市販薬、そして違法薬物など様々な種類がありますが、
            違法薬物は健康や社会に深刻な悪影響を及ぼすため、絶対に使用してはいけません。
          </p>
          
          <div class="warning-box">
            <h3><i class="fas fa-exclamation-triangle"></i> <span id="card1-subtitle1">主な違法薬物の種類</span></h3>
            <ul style="margin-left: 1.5rem;">
              <li><strong id="drug1">覚せい剤</strong>: <span id="drug1-desc">中枢神経を興奮させ、依存性が極めて高い</span></li>
              <li><strong id="drug2">大麻</strong>: <span id="drug2-desc">思考能力を低下させ、精神障害のリスクを高める</span></li>
              <li><strong id="drug3">MDMA（エクスタシー）</strong>: <span id="drug3-desc">幻覚や脱水症状を引き起こす</span></li>
              <li><strong id="drug4">ヘロイン</strong>: <span id="drug4-desc">強い依存性と禁断症状を持つオピオイド</span></li>
              <li><strong id="drug5">コカイン</strong>: <span id="drug5-desc">心臓発作や精神障害のリスクが高い</span></li>
            </ul>
          </div>
          
          <p id="card1-text2">
            薬物の使用は最初は「一度だけ」と思っても、多くの場合依存症に発展します。
            依存症は意志の弱さではなく、脳の機能変化による病気です。
          </p>
        </div>
        
        <!-- Card 2: Effects of drugs -->
        <div class="card animate-in">
          <div class="card-title">
            <i class="fas fa-heartbeat"></i>
            <h2 id="card2-title">薬物の影響と危険性</h2>
          </div>
          
          <div class="info-box">
            <h3><i class="fas fa-brain"></i> <span id="card2-subtitle1">身体への影響</span></h3>
            <ul style="margin-left: 1.5rem; margin-bottom: 1rem;">
              <li id="effect1">脳細胞の破壊と認知機能の低下</li>
              <li id="effect2">心臓発作や不整脈のリスク増加</li>
              <li id="effect3">肝臓・腎臓機能の障害</li>
              <li id="effect4">免疫システムの弱体化</li>
              <li id="effect5">栄養失調と体重減少</li>
            </ul>
          </div>
          
          <div class="warning-box">
            <h3><i class="fas fa-exclamation-triangle"></i> <span id="card2-subtitle2">精神への影響</span></h3>
            <ul style="margin-left: 1.5rem; margin-bottom: 1rem;">
              <li id="effect6">幻覚・妄想・パラノイア</li>
              <li id="effect7">うつ病や不安障害の発症</li>
              <li id="effect8">認知機能の低下と判断力の欠如</li>
              <li id="effect9">自殺念慮の増加</li>
              <li id="effect10">人格変化と社会的機能の低下</li>
            </ul>
          </div>
          
          <div class="info-box">
            <h3><i class="fas fa-users"></i> <span id="card2-subtitle3">社会的影響</span></h3>
            <ul style="margin-left: 1.5rem;">
              <li id="effect11">家族関係の崩壊</li>
              <li id="effect12">失業と経済的困窮</li>
              <li id="effect13">犯罪行為への関与</li>
              <li id="effect14">法的問題（逮捕・収監）</li>
              <li id="effect15">社会的信用の喪失</li>
            </ul>
          </div>
        </div>
        
        <!-- Card 3: Overcoming addiction -->
        <div class="card animate-in">
          <div class="card-title">
            <i class="fas fa-hands-helping"></i>
            <h2 id="card3-title">依存症から抜け出す方法</h2>
          </div>
          
          <div class="success-box">
            <h3><i class="fas fa-check-circle"></i> <span id="card3-subtitle1">回復へのステップ</span></h3>
            <ol style="margin-left: 1.5rem; margin-bottom: 1rem;">
              <li><strong id="step1">問題の認識</strong>: <span id="step1-desc">自分が依存症であることを認める</span></li>
              <li><strong id="step2">専門家の支援</strong>: <span id="step2-desc">医師やカウンセラーに相談する</span></li>
              <li><strong id="step3">デトックス</strong>: <span id="step3-desc">医療監視下での解毒プログラム</span></li>
              <li><strong id="step4">リハビリテーション</strong>: <span id="step4-desc">専門施設での治療プログラム</span></li>
              <li><strong id="step5">自助グループ</strong>: <span id="step5-desc">NA（ナルコティクス・アノニマス）などの参加</span></li>
              <li><strong id="step6">再発防止</strong>: <span id="step6-desc">ストレス管理と健康的な代替活動</span></li>
            </ol>
          </div>
          
          <div class="info-box">
            <h3><i class="fas fa-hands-helping"></i> <span id="card3-subtitle2">家族ができるサポート</span></h3>
            <ul style="margin-left: 1.5rem;">
              <li id="support1">非難せずに依存症を理解する</li>
              <li id="support2">専門家への相談を勧める</li>
              <li id="support3">共依存にならない境界線を設定</li>
              <li id="support4">家族自身のサポートグループ参加</li>
              <li id="support5">再発しても諦めず継続的サポート</li>
            </ul>
          </div>
          
          <p id="card3-text">
            回復には時間がかかりますが、適切な支援があれば依存症から抜け出すことは可能です。
            一人で悩まず、必ず専門家の助けを求めましょう。
          </p>
        </div>
        
        <!-- Card 4: Prevention -->
        <div class="card animate-in">
          <div class="card-title">
            <i class="fas fa-shield-alt"></i>
            <h2 id="card4-title">薬物使用を始めないために</h2>
          </div>
          
          <div class="success-box">
            <h3><i class="fas fa-ban"></i> <span id="card4-subtitle1">予防策</span></h3>
            <ul style="margin-left: 1.5rem; margin-bottom: 1rem;">
              <li id="prevention1">薬物の危険性について正確な知識を持つ</li>
              <li id="prevention2">ストレスに対処する健康的な方法を身につける</li>
              <li id="prevention3">「NO」と言う勇気とスキルを養う</li>
              <li id="prevention4">健全な友人関係を築く</li>
              <li id="prevention5">目標を持ち、達成感を得られる活動に参加する</li>
            </ul>
          </div>
          
          <div class="info-box">
            <h3><i class="fas fa-user-friends"></i> <span id="card4-subtitle2">危険な状況を避ける</span></h3>
            <ul style="margin-left: 1.5rem;">
              <li id="avoid1">薬物が使われそうな場所・集まりを避ける</li>
              <li id="avoid2">薬物使用者との関わりを断つ</li>
              <li id="avoid3">アルコールや他の薬物の影響下で判断しない</li>
              <li id="avoid4">SNSで知らない人からの誘いに注意</li>
            </ul>
          </div>
          
          <div class="warning-box">
            <h3><i class="fas fa-exclamation-circle"></i> <span id="card4-subtitle3">危険な考え方のサイン</span></h3>
            <ul style="margin-left: 1.5rem;">
              <li id="warning1">「一度だけなら大丈夫」</li>
              <li id="warning2">「自分は依存症にならない」</li>
              <li id="warning3">「ストレス解消に必要」</li>
              <li id="warning4">「みんなやっているから」</li>
            </ul>
          </div>
        </div>
        
        <!-- Card 5: Accident prevention -->
        <div class="card animate-in">
          <div class="card-title">
            <i class="fas fa-exclamation-triangle"></i>
            <h2 id="card5-title">薬物を誤って購入・使用しないために</h2>
          </div>
          
          <div class="info-box">
            <h3><i class="fas fa-shopping-cart"></i> <span id="card5-subtitle1">オンラインでの安全対策</span></h3>
            <ul style="margin-left: 1.5rem; margin-bottom: 1rem;">
              <li id="online1">信頼できないサイトから薬品を購入しない</li>
              <li id="online2">「合法ハーブ」などと称する製品に注意</li>
              <li id="online3">海外からの個人輸入は特に危険</li>
              <li id="online4">成分表示のないサプリメントは避ける</li>
              <li id="online5">クレジットカード情報を安易に入力しない</li>
            </ul>
          </div>
          
          <div class="warning-box">
            <h3><i class="fas fa-cocktail"></i> <span id="card5-subtitle2">飲み物・食べ物の安全確保</span></h3>
            <ul style="margin-left: 1.5rem; margin-bottom: 1rem;">
              <li id="food1">見知らぬ人からの飲み物を受け取らない</li>
              <li id="food2">目を離した飲み物は飲まない</li>
              <li id="food3">封を開けた状態で提供される飲み物に注意</li>
              <li id="food4">パーティーなどで共通のボウルから取った食べ物は避ける</li>
            </ul>
          </div>
          
          <div class="success-box">
            <h3><i class="fas fa-first-aid"></i> <span id="card5-subtitle3">もし危険を感じたら</span></h3>
            <ul style="margin-left: 1.5rem;">
              <li id="action1">すぐにその場を離れる</li>
              <li id="action2">信頼できる友人に連絡する</li>
              <li id="action3">110番（警察）や救急車を呼ぶ</li>
              <li id="action4">異変を感じたら迷わず医療機関を受診</li>
              <li id="action5">後日、警察に通報する</li>
            </ul>
          </div>
        </div>
        
        <!-- Card 6: Quiz -->
        <div class="card quiz-card animate-in">
          <div class="card-title">
            <i class="fas fa-question"></i>
            <h2 id="quiz-title">薬物知識クイズ</h2>
          </div>
          <p id="quiz-description">薬物依存症と予防に関する知識をテストしましょう！以下のクイズに答えて理解度を確認してください。</p>
          
          <div class="quiz-counter">
            <div class="counter-dot active" id="dot-1"></div>
            <div class="counter-dot" id="dot-2"></div>
            <div class="counter-dot" id="dot-3"></div>
            <div class="counter-dot" id="dot-4"></div>
            <div class="counter-dot" id="dot-5"></div>
          </div>
          
          <!-- Question 1 -->
          <div class="question current" id="question-1">
            <h3 id="q1-text">1. 薬物依存症から回復するための最初のステップは？</h3>
            <div class="quiz-options">
              <label class="quiz-option">
                <input type="radio" name="q1" value="問題の認識">
                <span id="q1-option1">問題の認識と依存症の自覚</span>
              </label>
              
              <label class="quiz-option">
                <input type="radio" name="q1" value="自己治療">
                <span id="q1-option2">自分だけで治療を試みる</span>
              </label>
              
              <label class="quiz-option">
                <input type="radio" name="q1" value="環境変更">
                <span id="q1-option3">住む場所を変える</span>
              </label>
              
              <label class="quiz-option">
                <input type="radio" name="q1" value="友人変更">
                <span id="q1-option4">友人を全員変える</span>
              </label>
            </div>
          </div>
          
          <!-- Question 2 -->
          <div class="question" id="question-2" style="display: none;">
            <h3 id="q2-text">2. 薬物を誤って摂取しないために注意すべきことは？（複数選択可）</h3>
            <div class="quiz-options">
              <label class="quiz-option">
                <input type="checkbox" name="q2" value="飲み物管理">
                <span id="q2-option1">目を離した飲み物を飲まない</span>
              </label>
              
              <label class="quiz-option">
                <input type="checkbox" name="q2" value="信頼できないサイト">
                <span id="q2-option2">信頼できないサイトから薬品を購入しない</span>
              </label>
              
              <label class="quiz-option">
                <input type="checkbox" name="q2" value="成分表示">
                <span id="q2-option3">成分表示のないサプリメントを避ける</span>
              </label>
              
              <label class="quiz-option">
                <input type="checkbox" name="q2" value="見知らぬ人">
                <span id="q2-option4">見知らぬ人からの飲食物を受け取らない</span>
              </label>
            </div>
          </div>
          
          <!-- Question 3 -->
          <div class="question" id="question-3" style="display: none;">
            <h3 id="q3-text">3. 薬物使用を予防する効果的な方法は？</h3>
            <div class="quiz-options">
              <label class="quiz-option">
                <input type="radio" name="q3" value="知識とスキル">
                <span id="q3-option1">薬物の危険性について学び、断るスキルを身につける</span>
              </label>
              
              <label class="quiz-option">
                <input type="radio" name="q3" value="体験">
                <span id="q3-option2">一度試してその危険性を実感する</span>
              </label>
              
              <label class="quiz-option">
                <input type="radio" name="q3" value="友人選択">
                <span id="q3-option3">薬物を使用している友人とだけ付き合う</span>
              </label>
              
              <label class="quiz-option">
                <input type="radio" name="q3" value="自己管理">
                <span id="q3-option4">自己管理能力を過信する</span>
              </label>
            </div>
          </div>
          
          <!-- Question 4 -->
          <div class="question" id="question-4" style="display: none;">
            <h3 id="q4-text">4. 薬物依存症の治療に有効なアプローチは？（複数選択可）</h3>
            <div class="quiz-options">
              <label class="quiz-option">
                <input type="checkbox" name="q4" value="医療デトックス">
                <span id="q4-option1">医療監視下での解毒プログラム</span>
              </label>
              
              <label class="quiz-option">
                <input type="checkbox" name="q4" value="カウンセリング">
                <span id="q4-option2">認知行動療法などのカウンセリング</span>
              </label>
              
              <label class="quiz-option">
                <input type="checkbox" name="q4" value="自助グループ">
                <span id="q4-option3">NA（ナルコティクス・アノニマス）などの自助グループ</span>
              </label>
              
              <label class="quiz-option">
                <input type="checkbox" name="q4" value="再発防止">
                <span id="q4-option4">再発防止計画の策定</span>
              </label>
            </div>
          </div>
          
          <!-- Question 5 -->
          <div class="question" id="question-5" style="display: none;">
            <h3 id="q5-text">5. 薬物の影響で起こりうる精神的な問題は？</h3>
            <div class="quiz-options">
              <label class="quiz-option">
                <input type="radio" name="q5" value="すべて">
                <span id="q5-option1">幻覚、妄想、うつ病、不安障害などすべて</span>
              </label>
              
              <label class="quiz-option">
                <input type="radio" name="q5" value="幻覚のみ">
                <span id="q5-option2">幻覚のみ</span>
              </label>
              
              <label class="quiz-option">
                <input type="radio" name="q5" value="身体症状">
                <span id="q5-option3">身体的な症状のみ</span>
              </label>
              
              <label class="quiz-option">
                <input type="radio" name="q5" value="一時的">
                <span id="q5-option4">一時的な気分の変化のみ</span>
              </label>
            </div>
          </div>
          
          <!-- Results Section -->
          <div class="results-container" id="results-container" style="display: none;">
            <div class="score-display">
              <div class="score-percentage" id="score-percentage">0%</div>
              <p id="score-text">あなたのスコア: <span id="score-value">0</span>/5</p>
            </div>
            
            <div class="results-summary">
              <h3><i class="fas fa-clipboard-check"></i> <span id="result-title">クイズ結果の詳細</span></h3>
              
              <div class="result-item" id="result-1">
                <h4><i class="fas fa-question-circle"></i> <span id="result-q1">質問1: 薬物依存症から回復するための最初のステップは？</span></h4>
                <p id="result-answer1">あなたの回答: <span class="user-answer"></span></p>
                <p id="result-correct1">正解: 問題の認識と依存症の自覚</p>
                <div class="explanation">
                  <p><strong id="result-exp1">解説:</strong> <span id="result-exp1-text">回復の第一歩は自分が依存症であることを認めることです。否認は依存症の特徴でもあり、このステップをクリアしなければ治療は始まりません。</span></p>
                </div>
              </div>
              
              <div class="result-item" id="result-2">
                <h4><i class="fas fa-question-circle"></i> <span id="result-q2">質問2: 薬物を誤って摂取しないために注意すべきことは？</span></h4>
                <p id="result-answer2">あなたの回答: <span class="user-answer"></span></p>
                <p id="result-correct2">正解: 目を離した飲み物を飲まない, 信頼できないサイトから薬品を購入しない, 成分表示のないサプリメントを避ける, 見知らぬ人からの飲食物を受け取らない</p>
                <div class="explanation">
                  <p><strong id="result-exp2">解説:</strong> <span id="result-exp2-text">これらのすべての対策が、意図せず薬物を摂取してしまうリスクを減らします。特にパーティーなどでは飲み物から目を離さないことが重要です。</span></p>
                </div>
              </div>
              
              <div class="result-item" id="result-3">
                <h4><i class="fas fa-question-circle"></i> <span id="result-q3">質問3: 薬物使用を予防する効果的な方法は？</span></h4>
                <p id="result-answer3">あなたの回答: <span class="user-answer"></span></p>
                <p id="result-correct3">正解: 薬物の危険性について学び、断るスキルを身につける</p>
                <div class="explanation">
                  <p><strong id="result-exp3">解説:</strong> <span id="result-exp3-text">予防には知識とスキルが不可欠です。薬物の危険性を理解し、実際に誘われた時に「NO」と言える技術を身につけることが最も効果的です。</span></p>
                </div>
              </div>
              
              <div class="result-item" id="result-4">
                <h4><i class="fas fa-question-circle"></i> <span id="result-q4">質問4: 薬物依存症の治療に有効なアプローチは？</span></h4>
                <p id="result-answer4">あなたの回答: <span class="user-answer"></span></p>
                <p id="result-correct4">正解: 医療監視下での解毒プログラム, 認知行動療法などのカウンセリング, NAなどの自助グループ, 再発防止計画の策定</p>
                <div class="explanation">
                  <p><strong id="result-exp4">解説:</strong> <span id="result-exp4-text">依存症治療は多面的なアプローチが必要です。身体的依存の治療だけでなく、心理的サポート、社会的支援、再発予防計画など包括的な対応が効果的です。</span></p>
                </div>
              </div>
              
              <div class="result-item" id="result-5">
                <h4><i class="fas fa-question-circle"></i> <span id="result-q5">質問5: 薬物の影響で起こりうる精神的な問題は？</span></h4>
                <p id="result-answer5">あなたの回答: <span class="user-answer"></span></p>
                <p id="result-correct5">正解: 幻覚、妄想、うつ病、不安障害などすべて</p>
                <div class="explanation">
                  <p><strong id="result-exp5">解説:</strong> <span id="result-exp5-text">薬物は多様な精神的な問題を引き起こします。一時的な幻覚から、長期的なうつ病や不安障害まで、様々な精神疾患のリスクを高めます。</span></p>
                </div>
              </div>
            </div>
            
            <button class="btn btn-block" onclick="restartQuiz()">
              <i class="fas fa-redo"></i> <span id="restart-btn">クイズをやり直す</span>
            </button>
          </div>
          
          <div class="quiz-nav">
            <button class="btn btn-outline" id="prev-btn" style="display: none;" onclick="prevQuestion()">
              <i class="fas fa-arrow-left"></i> <span id="prev-btn-text">前の質問</span>
            </button>
            <button class="btn" id="next-btn" onclick="nextQuestion()">
              <span id="next-btn-text">次の質問</span> <i class="fas fa-arrow-right"></i>
            </button>
            <button class="btn btn-secondary" id="submit-btn" style="display: none;" onclick="submitQuiz()">
              <i class="fas fa-paper-plane"></i> <span id="submit-btn-text">結果を確認</span>
            </button>
          </div>
          
          <div id="result" class="quiz-result"></div>
        </div>
        
        <!-- Card 7: Support and Resources -->
        <div class="card animate-in">
          <div class="card-title">
            <i class="fas fa-hands-helping"></i>
            <h2 id="support-title">支援と相談窓口</h2>
          </div>
          
          <div class="info-box">
            <h3><i class="fas fa-phone-alt"></i> <span id="emergency-title">緊急連絡先</span></h3>
            <ul style="margin-left: 1.5rem; margin-bottom: 1rem;">
              <li><strong id="police">警察</strong>: 110</li>
              <li><strong id="ambulance">救急車</strong>: 119</li>
              <li><strong id="hotline">薬物依存症相談ホットライン</strong>: 0120-555-555</li>
              <li><strong id="suicide">自殺予防ホットライン</strong>: 0120-666-666</li>
            </ul>
          </div>
          
          <div class="success-box">
            <h3><i class="fas fa-hospital"></i> <span id="treatment-title">治療施設</span></h3>
            <ul style="margin-left: 1.5rem; margin-bottom: 1rem;">
              <li id="facility1">国立精神・神経医療研究センター</li>
              <li id="facility2">各地域の精神保健福祉センター</li>
              <li id="facility3">民間の依存症治療施設</li>
              <li id="facility4">大学病院の精神科</li>
            </ul>
          </div>
          
          <div class="info-box">
            <h3><i class="fas fa-users"></i> <span id="group-title">自助グループ</span></h3>
            <ul style="margin-left: 1.5rem;">
              <li id="group1">ナルコティクス・アノニマス (NA)</li>
              <li id="group2">ダルク (DARC) - 薬物依存症回復施設</li>
              <li id="group3">家族の会 (薬物依存症の家族のためのサポート)</li>
            </ul>
          </div>
        </div>
        
        <!-- Card 8: References -->
        <div class="card links-card animate-in">
          <div class="card-title">
            <i class="fas fa-book"></i>
            <h2 id="references-title">参考資料と関連情報</h2>
          </div>
          <ul class="links-list">
            <li>
              <i class="fas fa-external-link-alt"></i>
              <a href="https://www.mhlw.go.jp/stf/seisakunitsuite/bunya/0000183317.html" target="_blank">
                <span id="link1">厚生労働省: 薬物乱用対策</span>
              </a>
            </li>
            <li>
              <i class="fas fa-external-link-alt"></i>
              <a href="https://www.ncnp.go.jp/" target="_blank">
                <span id="link2">国立精神・神経医療研究センター</span>
              </a>
            </li>
            <li>
              <i class="fas fa-external-link-alt"></i>
              <a href="https://www.darc.jp/" target="_blank">
                <span id="link3">ダルク (DARC) - 薬物依存症回復施設</span>
              </a>
            </li>
            <li>
              <i class="fas fa-external-link-alt"></i>
              <a href="https://na-japan.org/" target="_blank">
                <span id="link4">ナルコティクス・アノニマス日本</span>
              </a>
            </li>
            <li>
              <i class="fas fa-external-link-alt"></i>
              <a href="https://www.who.int/health-topics/drug-abuse" target="_blank">
                <span id="link5">WHO: 薬物乱用情報</span>
              </a>
            </li>
          </ul>
        </div>
        
        <!-- Tags Section -->
        <div class="card animate-in">
          <div class="card-title">
            <i class="fas fa-tags"></i>
            <h2 id="tags-title">関連トピック</h2>
          </div>
          <div class="tags-container">
            <span class="tag" id="tag1">薬物依存症</span>
            <span class="tag" id="tag2">回復プログラム</span>
            <span class="tag" id="tag3">再発防止</span>
            <span class="tag" id="tag4">予防教育</span>
            <span class="tag" id="tag5">デトックス</span>
            <span class="tag" id="tag6">カウンセリング</span>
            <span class="tag" id="tag7">自助グループ</span>
            <span class="tag" id="tag8">家族サポート</span>
            <span class="tag" id="tag9">違法薬物</span>
            <span class="tag" id="tag10">処方薬乱用</span>
            <span class="tag" id="tag11">脳への影響</span>
            <span class="tag" id="tag12">身体的影響</span>
            <span class="tag" id="tag13">精神的影響</span>
            <span class="tag" id="tag14">社会的影響</span>
            <span class="tag" id="tag15">危険な状況</span>
            <span class="tag" id="tag16">オンライン安全</span>
            <span class="tag" id="tag17">緊急対応</span>
            <span class="tag" id="tag18">相談窓口</span>
            <span class="tag" id="tag19">治療施設</span>
            <span class="tag" id="tag20">回復ストーリー</span>
          </div>
        </div>
      </div>
    </div>
  </main>
  
<footer>
  <div class="container">
    <p id="footer-text">MIT License | 薬物依存症予防教育リソース | 著者 GitHub https://github.com/serbekun/serbekun プロジェクト リソースコード https://github.com/serbekun/no-drugs-website</p>
    <p id="footer-note" style="font-size: 0.8rem; margin-top: 0.5rem; opacity: 0.7;">
      このサイトは教育目的で作成されており、医療アドバイスを提供するものではありません。問題がある場合は専門家に相談してください。
    </p>
  </div>
</footer>

  <button class="settings-btn" id="settings-btn">
    <i class="fas fa-cog"></i>
  </button>

  <div class="settings-overlay" id="settings-overlay"></div>

  <div class="settings-panel" id="settings-panel">
    <div class="settings-header">
      <h3 class="settings-title" id="settings-title">設定</h3>
      <button class="close-settings" id="close-settings">
        <i class="fas fa-times"></i>
      </button>
    </div>
    
    <div class="language-settings">
      <h4 id="lang-title">言語設定</h4>
      <div class="theme-options">
        <button class="lang-btn active" id="panel-ja">
          <i class="fas fa-language"></i> 日本語
        </button>
        <button class="lang-btn" id="panel-en">
          <i class="fas fa-language"></i> English
        </button>
      </div>
    </div>
    
    <div class="theme-selector">
      <h4 id="theme-title">テーマ</h4>
      <div class="theme-options">
        <button class="theme-btn theme-light active" id="theme-light">
          <span id="theme-light-text">ライト</span>
        </button>
        <button class="theme-btn theme-dark" id="theme-dark">
          <span id="theme-dark-text">ダーク</span>
        </button>
        <button class="theme-btn theme-blue" id="theme-blue">
          <span id="theme-blue-text">ブルー</span>
        </button>
      </div>
    </div>
  </div>

  <script>
    // Language translations
    const translations = {
      ja: {
        mainTitle: "薬物依存症と予防",
        mainSubtitle: "薬物の危険性、依存症からの回復、予防策について学ぶ",
        card1Title: "薬物とは？",
        card1Text1: "薬物とは、脳や身体に作用して一時的に感覚や意識を変化させる化学物質です。処方薬、市販薬、そして違法薬物など様々な種類がありますが、違法薬物は健康や社会に深刻な悪影響を及ぼすため、絶対に使用してはいけません。",
        card1Subtitle1: "主な違法薬物の種類",
        drug1: "覚せい剤",
        drug1Desc: "中枢神経を興奮させ、依存性が極めて高い",
        drug2: "大麻",
        drug2Desc: "思考能力を低下させ、精神障害のリスクを高める",
        drug3: "MDMA（エクスタシー）",
        drug3Desc: "幻覚や脱水症状を引き起こす",
        drug4: "ヘロイン",
        drug4Desc: "強い依存性と禁断症状を持つオピオイド",
        drug5: "コカイン",
        drug5Desc: "心臓発作や精神障害のリスクが高い",
        card1Text2: "薬物の使用は最初は「一度だけ」と思っても、多くの場合依存症に発展します。依存症は意志の弱さではなく、脳の機能変化による病気です。",
        card2Title: "薬物の影響と危険性",
        card2Subtitle1: "身体への影響",
        effect1: "脳細胞の破壊と認知機能の低下",
        effect2: "心臓発作や不整脈のリスク増加",
        effect3: "肝臓・腎臓機能の障害",
        effect4: "免疫システムの弱体化",
        effect5: "栄養失調と体重減少",
        card2Subtitle2: "精神への影響",
        effect6: "幻覚・妄想・パラノイア",
        effect7: "うつ病や不安障害の発症",
        effect8: "認知機能の低下と判断力の欠如",
        effect9: "自殺念慮の増加",
        effect10: "人格変化と社会的機能の低下",
        card2Subtitle3: "社会的影響",
        effect11: "家族関係の崩壊",
        effect12: "失業と経済的困窮",
        effect13: "犯罪行為への関与",
        effect14: "法的問題（逮捕・収監）",
        effect15: "社会的信用の喪失",
        card3Title: "依存症から抜け出す方法",
        card3Subtitle1: "回復へのステップ",
        step1: "問題の認識",
        step1Desc: "自分が依存症であることを認める",
        step2: "専門家の支援",
        step2Desc: "医師やカウンセラーに相談する",
        step3: "デトックス",
        step3Desc: "医療監視下での解毒プログラム",
        step4: "リハビリテーション",
        step4Desc: "専門施設での治療プログラム",
        step5: "自助グループ",
        step5Desc: "NA（ナルコティクス・アノニマス）などの参加",
        step6: "再発防止",
        step6Desc: "ストレス管理と健康的な代替活動",
        card3Subtitle2: "家族ができるサポート",
        support1: "非難せずに依存症を理解する",
        support2: "専門家への相談を勧める",
        support3: "共依存にならない境界線を設定",
        support4: "家族自身のサポートグループ参加",
        support5: "再発しても諦めず継続的サポート",
        card3Text: "回復には時間がかかりますが、適切な支援があれば依存症から抜け出すことは可能です。一人で悩まず、必ず専門家の助けを求めましょう。",
        card4Title: "薬物使用を始めないために",
        card4Subtitle1: "予防策",
        prevention1: "薬物の危険性について正確な知識を持つ",
        prevention2: "ストレスに対処する健康的な方法を身につける",
        prevention3: "「NO」と言う勇気とスキルを養う",
        prevention4: "健全な友人関係を築く",
        prevention5: "目標を持ち、達成感を得られる活動に参加する",
        card4Subtitle2: "危険な状況を避ける",
        avoid1: "薬物が使われそうな場所・集まりを避ける",
        avoid2: "薬物使用者との関わりを断つ",
        avoid3: "アルコールや他の薬物の影響下で判断しない",
        avoid4: "SNSで知らない人からの誘いに注意",
        card4Subtitle3: "危険な考え方のサイン",
        warning1: "「一度だけなら大丈夫」",
        warning2: "「自分は依存症にならない」",
        warning3: "「ストレス解消に必要」",
        warning4: "「みんなやっているから」",
        card5Title: "薬物を誤って購入・使用しないために",
        card5Subtitle1: "オンラインでの安全対策",
        online1: "信頼できないサイトから薬品を購入しない",
        online2: "「合法ハーブ」などと称する製品に注意",
        online3: "海外からの個人輸入は特に危険",
        online4: "成分表示のないサプリメントは避ける",
        online5: "クレジットカード情報を安易に入力しない",
        card5Subtitle2: "飲み物・食べ物の安全確保",
        food1: "見知らぬ人からの飲み物を受け取らない",
        food2: "目を離した飲み物は飲まない",
        food3: "封を開けた状態で提供される飲み物に注意",
        food4: "パーティーなどで共通のボウルから取った食べ物は避ける",
        card5Subtitle3: "もし危険を感じたら",
        action1: "すぐにその場を離れる",
        action2: "信頼できる友人に連絡する",
        action3: "110番（警察）や救急車を呼ぶ",
        action4: "異変を感じたら迷わず医療機関を受診",
        action5: "後日、警察に通報する",
        quizTitle: "薬物知識クイズ",
        quizDescription: "薬物依存症と予防に関する知識をテストしましょう！以下のクイズに答えて理解度を確認してください。",
        q1Text: "1. 薬物依存症から回復するための最初のステップは？",
        q1Option1: "問題の認識と依存症の自覚",
        q1Option2: "自分だけで治療を試みる",
        q1Option3: "住む場所を変える",
        q1Option4: "友人を全員変える",
        q2Text: "2. 薬物を誤って摂取しないために注意すべきことは？（複数選択可）",
        q2Option1: "目を離した飲み物を飲まない",
        q2Option2: "信頼できないサイトから薬品を購入しない",
        q2Option3: "成分表示のないサプリメントを避ける",
        q2Option4: "見知らぬ人からの飲食物を受け取らない",
        q3Text: "3. 薬物使用を予防する効果的な方法は？",
        q3Option1: "薬物の危険性について学び、断るスキルを身につける",
        q3Option2: "一度試してその危険性を実感する",
        q3Option3: "薬物を使用している友人とだけ付き合う",
        q3Option4: "自己管理能力を過信する",
        q4Text: "4. 薬物依存症の治療に有効なアプローチは？（複数選択可）",
        q4Option1: "医療監視下での解毒プログラム",
        q4Option2: "認知行動療法などのカウンセリング",
        q4Option3: "NA（ナルコティクス・アノニマス）などの自助グループ",
        q4Option4: "再発防止計画の策定",
        q5Text: "5. 薬物の影響で起こりうる精神的な問題は？",
        q5Option1: "幻覚、妄想、うつ病、不安障害などすべて",
        q5Option2: "幻覚のみ",
        q5Option3: "身体的な症状のみ",
        q5Option4: "一時的な気分の変化のみ",
        prevBtnText: "前の質問",
        nextBtnText: "次の質問",
        submitBtnText: "結果を確認",
        resultTitle: "クイズ結果の詳細",
        resultQ1: "質問1: 薬物依存症から回復するための最初のステップは？",
        resultAnswer1: "あなたの回答:",
        resultCorrect1: "正解: 問題の認識と依存症の自覚",
        resultExp1: "解説:",
        resultExp1Text: "回復の第一歩は自分が依存症であることを認めることです。否認は依存症の特徴でもあり、このステップをクリアしなければ治療は始まりません。",
        resultQ2: "質問2: 薬物を誤って摂取しないために注意すべきことは？",
        resultAnswer2: "あなたの回答:",
        resultCorrect2: "正解: 目を離した飲み物を飲まない, 信頼できないサイトから薬品を購入しない, 成分表示のないサプリメントを避ける, 見知らぬ人からの飲食物を受け取らない",
        resultExp2: "解説:",
        resultExp2Text: "これらのすべての対策が、意図せず薬物を摂取してしまうリスクを減らします。特にパーティーなどでは飲み物から目を離さないことが重要です。",
        resultQ3: "質問3: 薬物使用を予防する効果的な方法は？",
        resultAnswer3: "あなたの回答:",
        resultCorrect3: "正解: 薬物の危険性について学び、断るスキルを身につける",
        resultExp3: "解説:",
        resultExp3Text: "予防には知識とスキルが不可欠です。薬物の危険性を理解し、実際に誘われた時に「NO」と言える技術を身につけることが最も効果的です。",
        resultQ4: "質問4: 薬物依存症の治療に有効なアプローチは？",
        resultAnswer4: "あなたの回答:",
        resultCorrect4: "正解: 医療監視下での解毒プログラム, 認知行動療法などのカウンセリング, NAなどの自助グループ, 再発防止計画の策定",
        resultExp4: "解説:",
        resultExp4Text: "依存症治療は多面的なアプローチが必要です。身体的依存の治療だけでなく、心理的サポート、社会的支援、再発予防計画など包括的な対応が効果的です。",
        resultQ5: "質問5: 薬物の影響で起こりうる精神的な問題は？",
        resultAnswer5: "あなたの回答:",
        resultCorrect5: "正解: 幻覚、妄想、うつ病、不安障害などすべて",
        resultExp5: "解説:",
        resultExp5Text: "薬物は多様な精神的な問題を引き起こします。一時的な幻覚から、長期的なうつ病や不安障害まで、様々な精神疾患のリスクを高めます。",
        restartBtn: "クイズをやり直す",
        supportTitle: "支援と相談窓口",
        emergencyTitle: "緊急連絡先",
        police: "警察",
        ambulance: "救急車",
        hotline: "薬物依存症相談ホットライン",
        suicide: "自殺予防ホットライン",
        treatmentTitle: "治療施設",
        facility1: "国立精神・神経医療研究センター",
        facility2: "各地域の精神保健福祉センター",
        facility3: "民間の依存症治療施設",
        facility4: "大学病院の精神科",
        groupTitle: "自助グループ",
        group1: "ナルコティクス・アノニマス (NA)",
        group2: "ダルク (DARC) - 薬物依存症回復施設",
        group3: "家族の会 (薬物依存症の家族のためのサポート)",
        referencesTitle: "参考資料と関連情報",
        link1: "厚生労働省: 薬物乱用対策",
        link2: "国立精神・神経医療研究センター",
        link3: "ダルク (DARC) - 薬物依存症回復施設",
        link4: "ナルコティクス・アノニマス日本",
        link5: "WHO: 薬物乱用情報",
        tagsTitle: "関連トピック",
        tag1: "薬物依存症",
        tag2: "回復プログラム",
        tag3: "再発防止",
        tag4: "予防教育",
        tag5: "デトックス",
        tag6: "カウンセリング",
        tag7: "自助グループ",
        tag8: "家族サポート",
        tag9: "違法薬物",
        tag10: "処方薬乱用",
        tag11: "脳への影響",
        tag12: "身体的影響",
        tag13: "精神的影響",
        tag14: "社会的影響",
        tag15: "危険な状況",
        tag16: "オンライン安全",
        tag17: "緊急対応",
        tag18: "相談窓口",
        tag19: "治療施設",
        tag20: "回復ストーリー",
        footerText: "© 2025 薬物依存症予防教育リソース | 作成者: Mishchenko Sergey",
        footerNote: "このサイトは教育目的で作成されており、医療アドバイスを提供するものではありません。問題がある場合は専門家に相談してください。",
        settingsTitle: "設定",
        langTitle: "言語設定",
        themeTitle: "テーマ",
        themeLightText: "ライト",
        themeDarkText: "ダーク",
        themeBlueText: "ブルー"
      },
      en: {
        mainTitle: "Drug Addiction and Prevention",
        mainSubtitle: "Learn about the dangers of drugs, recovery from addiction, and prevention strategies",
        card1Title: "What are Drugs?",
        card1Text1: "Drugs are chemical substances that temporarily alter sensations or consciousness by affecting the brain and body. There are various types including prescription drugs, over-the-counter medications, and illegal substances, but illegal drugs cause serious harm to health and society and must never be used.",
        card1Subtitle1: "Main Types of Illegal Drugs",
        drug1: "Stimulants",
        drug1Desc: "Highly addictive substances that excite the central nervous system",
        drug2: "Marijuana",
        drug2Desc: "Reduces cognitive ability and increases risk of mental disorders",
        drug3: "MDMA (Ecstasy)",
        drug3Desc: "Causes hallucinations and dehydration",
        drug4: "Heroin",
        drug4Desc: "Opioid with strong addictive properties and withdrawal symptoms",
        drug5: "Cocaine",
        drug5Desc: "High risk of heart attack and mental disorders",
        card1Text2: "Drug use often starts with \"just once\" but frequently develops into addiction. Addiction is not a weakness of will but a disease caused by changes in brain function.",
        card2Title: "Effects and Dangers of Drugs",
        card2Subtitle1: "Physical Effects",
        effect1: "Destruction of brain cells and cognitive decline",
        effect2: "Increased risk of heart attack and arrhythmia",
        effect3: "Liver and kidney dysfunction",
        effect4: "Weakened immune system",
        effect5: "Malnutrition and weight loss",
        card2Subtitle2: "Psychological Effects",
        effect6: "Hallucinations, delusions, paranoia",
        effect7: "Development of depression and anxiety disorders",
        effect8: "Decline in cognitive function and judgment",
        effect9: "Increased suicidal thoughts",
        effect10: "Personality changes and social dysfunction",
        card2Subtitle3: "Social Effects",
        effect11: "Breakdown of family relationships",
        effect12: "Unemployment and financial hardship",
        effect13: "Involvement in criminal activities",
        effect14: "Legal problems (arrest, imprisonment)",
        effect15: "Loss of social credibility",
        card3Title: "Overcoming Addiction",
        card3Subtitle1: "Recovery Steps",
        step1: "Problem Recognition",
        step1Desc: "Admitting that one has an addiction",
        step2: "Professional Help",
        step2Desc: "Consulting doctors and counselors",
        step3: "Detox",
        step3Desc: "Medical detoxification program under supervision",
        step4: "Rehabilitation",
        step4Desc: "Treatment program at specialized facilities",
        step5: "Support Groups",
        step5Desc: "Participating in groups like NA (Narcotics Anonymous)",
        step6: "Relapse Prevention",
        step6Desc: "Stress management and healthy alternative activities",
        card3Subtitle2: "Support for Families",
        support1: "Understand addiction without blaming",
        support2: "Encourage consultation with professionals",
        support3: "Set boundaries without codependency",
        support4: "Participate in family support groups",
        support5: "Provide continuous support even after relapse",
        card3Text: "Recovery takes time, but with proper support, it is possible to overcome addiction. Don't struggle alone, always seek professional help.",
        card4Title: "Preventing Drug Use",
        card4Subtitle1: "Prevention Strategies",
        prevention1: "Acquire accurate knowledge about drug dangers",
        prevention2: "Develop healthy ways to cope with stress",
        prevention3: "Build courage and skills to say \"NO\"",
        prevention4: "Establish healthy friendships",
        prevention5: "Set goals and participate in fulfilling activities",
        card4Subtitle2: "Avoid Dangerous Situations",
        avoid1: "Avoid places and gatherings where drugs might be used",
        avoid2: "Cut ties with drug users",
        avoid3: "Avoid making decisions under the influence of alcohol or drugs",
        avoid4: "Be cautious of invitations from strangers on social media",
        card4Subtitle3: "Warning Signs of Dangerous Thinking",
        warning1: "\"Just once won't hurt\"",
        warning2: "\"I won't get addicted\"",
        warning3: "\"I need this to relieve stress\"",
        warning4: "\"Everyone else is doing it\"",
        card5Title: "Avoiding Accidental Drug Use",
        card5Subtitle1: "Online Safety Measures",
        online1: "Don't buy medications from untrustworthy sites",
        online2: "Be wary of products labeled as \"legal herbs\"",
        online3: "Personal imports from overseas are particularly dangerous",
        online4: "Avoid supplements without ingredient labels",
        online5: "Don't enter credit card information carelessly",
        card5Subtitle2: "Food and Drink Safety",
        food1: "Don't accept drinks from strangers",
        food2: "Don't drink from unattended beverages",
        food3: "Be cautious of drinks served in open containers",
        food4: "Avoid food taken from common bowls at parties",
        card5Subtitle3: "If You Feel in Danger",
        action1: "Leave the location immediately",
        action2: "Contact a trusted friend",
        action3: "Call 110 (police) or 119 (ambulance)",
        action4: "Seek medical help immediately if you feel unwell",
        action5: "Report to police afterward",
        quizTitle: "Drug Knowledge Quiz",
        quizDescription: "Test your knowledge about drug addiction and prevention! Answer the quiz below to check your understanding.",
        q1Text: "1. What is the first step to recovery from drug addiction?",
        q1Option1: "Problem recognition and self-awareness of addiction",
        q1Option2: "Attempting treatment by oneself",
        q1Option3: "Changing residence",
        q1Option4: "Changing all friends",
        q2Text: "2. What precautions should you take to avoid accidental drug consumption? (Multiple choices)",
        q2Option1: "Don't drink unattended beverages",
        q2Option2: "Don't buy medications from untrustworthy websites",
        q2Option3: "Avoid supplements without ingredient labels",
        q2Option4: "Don't accept food or drink from strangers",
        q3Text: "3. What is an effective way to prevent drug use?",
        q3Option1: "Learn about drug dangers and develop refusal skills",
        q3Option2: "Try once to experience its dangers",
        q3Option3: "Only associate with friends who use drugs",
        q3Option4: "Overestimate self-management abilities",
        q4Text: "4. What approaches are effective in treating drug addiction? (Multiple choices)",
        q4Option1: "Medically supervised detox programs",
        q4Option2: "Counseling such as cognitive behavioral therapy",
        q4Option3: "Support groups like NA (Narcotics Anonymous)",
        q4Option4: "Developing relapse prevention plans",
        q5Text: "5. What mental problems can drugs cause?",
        q5Option1: "All: hallucinations, delusions, depression, anxiety disorders",
        q5Option2: "Hallucinations only",
        q5Option3: "Only physical symptoms",
        q5Option4: "Only temporary mood changes",
        prevBtnText: "Previous Question",
        nextBtnText: "Next Question",
        submitBtnText: "Check Results",
        resultTitle: "Quiz Results Details",
        resultQ1: "Question 1: What is the first step to recovery from drug addiction?",
        resultAnswer1: "Your answer:",
        resultCorrect1: "Correct: Problem recognition and self-awareness of addiction",
        resultExp1: "Explanation:",
        resultExp1Text: "The first step to recovery is admitting that one has an addiction. Denial is a characteristic of addiction, and treatment cannot begin without clearing this step.",
        resultQ2: "Question 2: What precautions should you take to avoid accidental drug consumption?",
        resultAnswer2: "Your answer:",
        resultCorrect2: "Correct: Don't drink unattended beverages, Don't buy medications from untrustworthy websites, Avoid supplements without ingredient labels, Don't accept food or drink from strangers",
        resultExp2: "Explanation:",
        resultExp2Text: "All these measures reduce the risk of accidentally consuming drugs. It's especially important not to leave drinks unattended at parties.",
        resultQ3: "Question 3: What is an effective way to prevent drug use?",
        resultAnswer3: "Your answer:",
        resultCorrect3: "Correct: Learn about drug dangers and develop refusal skills",
        resultExp3: "Explanation:",
        resultExp3Text: "Knowledge and skills are essential for prevention. Understanding the dangers of drugs and developing the ability to say \"NO\" when offered is the most effective approach.",
        resultQ4: "Question 4: What approaches are effective in treating drug addiction?",
        resultAnswer4: "Your answer:",
        resultCorrect4: "Correct: Medically supervised detox programs, Counseling such as cognitive behavioral therapy, Support groups like NA, Developing relapse prevention plans",
        resultExp4: "Explanation:",
        resultExp4Text: "Addiction treatment requires a multifaceted approach. Beyond treating physical dependence, psychological support, social assistance, and relapse prevention plans are essential for effective treatment.",
        resultQ5: "Question 5: What mental problems can drugs cause?",
        resultAnswer5: "Your answer:",
        resultCorrect5: "Correct: All: hallucinations, delusions, depression, anxiety disorders",
        resultExp5: "Explanation:",
        resultExp5Text: "Drugs cause various mental problems. From temporary hallucinations to long-term depression and anxiety disorders, they increase the risk of numerous mental illnesses.",
        restartBtn: "Restart Quiz",
        supportTitle: "Support and Resources",
        emergencyTitle: "Emergency Contacts",
        police: "Police",
        ambulance: "Ambulance",
        hotline: "Drug Addiction Hotline",
        suicide: "Suicide Prevention Hotline",
        treatmentTitle: "Treatment Facilities",
        facility1: "National Center of Neurology and Psychiatry",
        facility2: "Regional Mental Health and Welfare Centers",
        facility3: "Private Addiction Treatment Centers",
        facility4: "University Hospital Psychiatry Departments",
        groupTitle: "Support Groups",
        group1: "Narcotics Anonymous (NA)",
        group2: "DARC - Drug Addiction Rehabilitation Center",
        group3: "Family Support Groups",
        referencesTitle: "References and Resources",
        link1: "MHLW: Drug Abuse Countermeasures",
        link2: "National Center of Neurology and Psychiatry",
        link3: "DARC - Drug Addiction Rehabilitation Center",
        link4: "Narcotics Anonymous Japan",
        link5: "WHO: Drug Abuse Information",
        tagsTitle: "Related Topics",
        tag1: "Drug Addiction",
        tag2: "Recovery Programs",
        tag3: "Relapse Prevention",
        tag4: "Prevention Education",
        tag5: "Detox",
        tag6: "Counseling",
        tag7: "Support Groups",
        tag8: "Family Support",
        tag9: "Illegal Drugs",
        tag10: "Prescription Drug Abuse",
        tag11: "Brain Effects",
        tag12: "Physical Effects",
        tag13: "Psychological Effects",
        tag14: "Social Effects",
        tag15: "Dangerous Situations",
        tag16: "Online Safety",
        tag17: "Emergency Response",
        tag18: "Consultation Services",
        tag19: "Treatment Facilities",
        tag20: "Recovery Stories",
        footerText: "MIT License | Drug Addiction Prevention Resources | Author GitHub https://github.com/serbekun/serbekun source code https://github.com/serbekun/no-drugs-website</p>",
        footerNote: "This site is for educational purposes only and does not provide medical advice. Please consult a professional if you have any problems.",
        settingsTitle: "Settings",
        langTitle: "Language Settings",
        themeTitle: "Theme",
        themeLightText: "Light",
        themeDarkText: "Dark",
        themeBlueText: "Blue"
      }
    };

    // Set language function
    function setLanguage(lang) {
      // Update HTML lang attribute
      document.documentElement.lang = lang;
      
      // Get all translatable elements
      const elements = document.querySelectorAll('[id]');
      
      // Update content for each element
      elements.forEach(element => {
        const key = element.id;
        if (translations[lang][key]) {
          element.textContent = translations[lang][key];
        }
      });
      
      // Update active button
      document.querySelectorAll('.lang-btn').forEach(btn => {
        btn.classList.remove('active');
      });
      document.getElementById(`lang-${lang}`).classList.add('active');
      document.getElementById(`panel-${lang}`).classList.add('active');
      
      // Save to localStorage
      localStorage.setItem('language', lang);
    }

    // Initialize language
    function initLanguage() {
      // Get saved language or system language
      let lang = localStorage.getItem('language') || 
                 (navigator.language.startsWith('ja') ? 'ja' : 'en');
      
      // Set language
      setLanguage(lang);
    }

    // Quiz state management
    let currentQuestion = 1;
    const totalQuestions = 5;
    const answers = {
      q1: null,
      q2: [],
      q3: null,
      q4: [],
      q5: null
    };
    
    // Correct answers
    const correctAnswers = {
      q1: "問題の認識",
      q2: ["飲み物管理", "信頼できないサイト", "成分表示", "見知らぬ人"],
      q3: "知識とスキル",
      q4: ["医療デトックス", "カウンセリング", "自助グループ", "再発防止"],
      q5: "すべて"
    };
    
    // Navigation functions
    function nextQuestion() {
      // Save current answer
      saveAnswer(currentQuestion);
      
      // Validate current question
      if (!isQuestionAnswered(currentQuestion)) {
        showResult("warning", "回答を選択してください");
        return;
      }
      
      // Hide current question
      document.getElementById(`question-${currentQuestion}`).style.display = 'none';
      
      // Move to next question
      currentQuestion++;
      
      // Show next question or results
      if (currentQuestion <= totalQuestions) {
        document.getElementById(`question-${currentQuestion}`).style.display = 'block';
        updateCounterDots();
        updateNavButtons();
        hideResult();
      } else {
        submitQuiz();
      }
    }
    
    function prevQuestion() {
      // Hide current question
      document.getElementById(`question-${currentQuestion}`).style.display = 'none';
      
      // Move to previous question
      currentQuestion--;
      
      // Show previous question
      document.getElementById(`question-${currentQuestion}`).style.display = 'block';
      updateCounterDots();
      updateNavButtons();
      hideResult();
    }
    
    function submitQuiz() {
      // Save last answer
      saveAnswer(currentQuestion);
      
      // Calculate score
      const score = calculateScore();
      const percentage = Math.round((score / totalQuestions) * 100);
      
      // Display results
      document.getElementById("score-percentage").textContent = `${percentage}%`;
      document.getElementById("score-value").textContent = score;
      
      // Hide questions and show results
      document.querySelectorAll('.question').forEach(q => q.style.display = 'none');
      document.getElementById('results-container').style.display = 'block';
      document.getElementById('prev-btn').style.display = 'none';
      document.getElementById('next-btn').style.display = 'none';
      document.getElementById('submit-btn').style.display = 'none';
      
      // Display detailed results
      displayDetailedResults();
    }
    
    function restartQuiz() {
      // Reset state
      currentQuestion = 1;
      answers.q1 = null;
      answers.q2 = [];
      answers.q3 = null;
      answers.q4 = [];
      answers.q5 = null;
      
      // Reset UI
      document.getElementById('results-container').style.display = 'none';
      document.querySelectorAll('.question').forEach(q => q.style.display = 'none');
      document.getElementById('question-1').style.display = 'block';
      
      // Clear selections
      document.querySelectorAll('input[type="radio"], input[type="checkbox"]').forEach(input => {
        input.checked = false;
      });
      
      // Reset counter dots
      document.querySelectorAll('.counter-dot').forEach(dot => {
        dot.classList.remove('answered');
      });
      
      // Reset nav buttons
      updateCounterDots();
      updateNavButtons();
    }
    
    // Helper functions
    function saveAnswer(questionNum) {
      const questionId = `q${questionNum}`;
      
      if (questionNum === 1 || questionNum === 3 || questionNum === 5) {
        // Radio button questions
        const selected = document.querySelector(`input[name="${questionId}"]:checked`);
        answers[questionId] = selected ? selected.value : null;
      } else {
        // Checkbox questions
        const selected = document.querySelectorAll(`input[name="${questionId}"]:checked`);
        answers[questionId] = Array.from(selected).map(input => input.value);
      }
      
      // Update counter dot if answered
      if (isQuestionAnswered(questionNum)) {
        document.getElementById(`dot-${questionNum}`).classList.add('answered');
      }
    }
    
    function isQuestionAnswered(questionNum) {
      const questionId = `q${questionNum}`;
      
      if (questionNum === 1 || questionNum === 3 || questionNum === 5) {
        return answers[questionId] !== null;
      } else {
        return answers[questionId].length > 0;
      }
    }
    
    function calculateScore() {
      let score = 0;
      
      // Question 1
      if (answers.q1 === correctAnswers.q1) score++;
      
      // Question 2 (check if arrays are equal)
      if (arraysEqual(answers.q2.sort(), correctAnswers.q2.sort())) score++;
      
      // Question 3
      if (answers.q3 === correctAnswers.q3) score++;
      
      // Question 4 (check if arrays are equal)
      if (arraysEqual(answers.q4.sort(), correctAnswers.q4.sort())) score++;
      
      // Question 5
      if (answers.q5 === correctAnswers.q5) score++;
      
      return score;
    }
    
    function arraysEqual(a, b) {
      if (a === b) return true;
      if (a == null || b == null) return false;
      if (a.length !== b.length) return false;
      
      for (let i = 0; i < a.length; i++) {
        if (a[i] !== b[i]) return false;
      }
      
      return true;
    }
    
    function updateCounterDots() {
      document.querySelectorAll('.counter-dot').forEach((dot, index) => {
        dot.classList.toggle('active', index + 1 === currentQuestion);
      });
    }
    
    function updateNavButtons() {
      document.getElementById('prev-btn').style.display = currentQuestion > 1 ? 'inline-block' : 'none';
      
      if (currentQuestion === totalQuestions) {
        document.getElementById('next-btn').style.display = 'none';
        document.getElementById('submit-btn').style.display = 'inline-block';
      } else {
        document.getElementById('next-btn').style.display = 'inline-block';
        document.getElementById('submit-btn').style.display = 'none';
      }
    }
    
    function displayDetailedResults() {
      // Question 1
      const result1 = document.getElementById('result-1');
      result1.querySelector('.user-answer').textContent = answers.q1 || '未回答';
      result1.classList.toggle('correct', answers.q1 === correctAnswers.q1);
      result1.classList.toggle('incorrect', answers.q1 !== correctAnswers.q1);
      
      // Question 2
      const result2 = document.getElementById('result-2');
      result2.querySelector('.user-answer').textContent = answers.q2.length > 0 ? answers.q2.join(', ') : '未回答';
      result2.classList.toggle('correct', arraysEqual(answers.q2.sort(), correctAnswers.q2.sort()));
      result2.classList.toggle('incorrect', !arraysEqual(answers.q2.sort(), correctAnswers.q2.sort()));
      
      // Question 3
      const result3 = document.getElementById('result-3');
      result3.querySelector('.user-answer').textContent = answers.q3 || '未回答';
      result3.classList.toggle('correct', answers.q3 === correctAnswers.q3);
      result3.classList.toggle('incorrect', answers.q3 !== correctAnswers.q3);
      
      // Question 4
      const result4 = document.getElementById('result-4');
      result4.querySelector('.user-answer').textContent = answers.q4.length > 0 ? answers.q4.join(', ') : '未回答';
      result4.classList.toggle('correct', arraysEqual(answers.q4.sort(), correctAnswers.q4.sort()));
      result4.classList.toggle('incorrect', !arraysEqual(answers.q4.sort(), correctAnswers.q4.sort()));
      
      // Question 5
      const result5 = document.getElementById('result-5');
      result5.querySelector('.user-answer').textContent = answers.q5 || '未回答';
      result5.classList.toggle('correct', answers.q5 === correctAnswers.q5);
      result5.classList.toggle('incorrect', answers.q5 !== correctAnswers.q5);
    }
    
    function showResult(type, message) {
      const resultEl = document.getElementById("result");
      resultEl.innerHTML = message;
      resultEl.classList.remove("success", "error", "warning", "info", "show");
      
      setTimeout(() => {
        resultEl.classList.add(type, "show");
      }, 10);
    }
    
    function hideResult() {
      const resultEl = document.getElementById("result");
      resultEl.classList.remove("show");
    }
    
    // Theme switching
    function setTheme(theme) {
      document.body.className = theme;
      localStorage.setItem('theme', theme);
      
      // Update active button
      document.querySelectorAll('.theme-btn').forEach(btn => {
        btn.classList.remove('active');
      });
      document.getElementById(`theme-${theme}`).classList.add('active');
    }
    
    // Settings panel
    function toggleSettings() {
      document.getElementById('settings-overlay').classList.toggle('active');
      document.getElementById('settings-panel').classList.toggle('active');
    }

    // Initialize page
    document.addEventListener('DOMContentLoaded', function() {
      // Initialize animations
      const cards = document.querySelectorAll('.card');
      
      const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            entry.target.style.animationPlayState = 'running';
            observer.unobserve(entry.target);
          }
        });
      }, { threshold: 0.1 });
      
      cards.forEach(card => {
        card.style.animation = 'fadeIn 0.6s ease forwards paused';
        observer.observe(card);
      });
      
      // Initialize counter dots
      for (let i = 1; i <= totalQuestions; i++) {
        const dot = document.createElement('div');
        dot.className = 'counter-dot';
        dot.id = `dot-${i}`;
        if (i === 1) dot.classList.add('active');
        document.querySelector('.quiz-counter').appendChild(dot);
      }
      
      // Update nav buttons on load
      updateNavButtons();
      
      // Initialize language
      initLanguage();
      
      // Set up language switchers
      document.getElementById('lang-ja').addEventListener('click', () => setLanguage('ja'));
      document.getElementById('lang-en').addEventListener('click', () => setLanguage('en'));
      document.getElementById('panel-ja').addEventListener('click', () => setLanguage('ja'));
      document.getElementById('panel-en').addEventListener('click', () => setLanguage('en'));
      
      // Initialize theme
      const savedTheme = localStorage.getItem('theme') || '';
      if (savedTheme) setTheme(savedTheme);
      
      // Set up theme switchers
      document.getElementById('theme-light').addEventListener('click', () => setTheme(''));
      document.getElementById('theme-dark').addEventListener('click', () => setTheme('dark-theme'));
      document.getElementById('theme-blue').addEventListener('click', () => setTheme('blue-theme'));
      
      // Settings panel
      document.getElementById('settings-btn').addEventListener('click', toggleSettings);
      document.getElementById('close-settings').addEventListener('click', toggleSettings);
      document.getElementById('settings-overlay').addEventListener('click', toggleSettings);
    });
  </script>
</body>
</html>
